# 2.4 消息队列

消息队列是指通过一定的规则和逻辑，将服务请求消息正确地传达到服务提供端


## 2.4.1 队列管理 

### 2.4.1.1功能介绍 

队列管理，提供异步发送消息机制。 

通过云资源，提供的主机号、端口号，用户配置调用消息服务。

### 2.4.1.2 界面说明

单击【消息队列】→【队列管理】，进入队列管理页面。界面如下：

![](/assets/5-/4/image107.png)

图2.4‑1队列管理

红框标注，为云端提供的主机号及端口号。

### 2.4.1.3 操作流程

**创建队列**

单击〖创建队列〗按钮，弹出队列设置窗口，填写队列的基本信息（*为必输项），包括队列名称、消息存活时间、队列消息容量等，单击〖确定〗，完成队列的新增操作。

![](/assets/5-/4/image108.png)

图2.4‑2创建队列

**刷新**

单击〖刷新〗按钮，更新当前状态的队列列表。

![](/assets/5-/4/image109.png)

图2.4‑3刷新队列列表

**查看**

选择一个队列，单击〖查看〗按钮，弹出队列设置窗口。

**队列消息**

默认进入队列消息页签，可查看队列基本信息。包括队列名称、消息存活时间、队列消息容量及队列消息折线图。

![](/assets/5-/4/image110.png)

图2.4‑4 队列信息

 队列消息折线图，如下图所示：

 横轴显示时间范围，纵轴显示消息数量；

 折线含义根据颜色区分，三种状态：准备、未应答、总共；

 可选时间状态，一分钟、十分钟、一小时、八小时、一天。

![](/assets/5-/4/image111.png)

图2.4-5折线图

**发送消息**

进入队列消息页签，可设置队列发送消息。选择消息类型，填写消息内容。

消息类型，包括三种：Text、Json、Xml。

![](/assets/5-/4/image112.png)

图2.4‑6 发送消息

**消息查询**

进入消息查询页签，输入接收消息数量（默认为1条），单击〖获取消息〗按钮，窗口下方可查看接收消息。

![](/assets/5-/4/image113.png)

图2.4‑7消息查询

**删除**

选择某一队列，单击〖删除〗按钮，可将选择的队列从队列管理列表中删除。

![](/assets/5-/4/image114.png)

图2.4‑8 删除队列

## 2.4.2 路由管理

### 2.4.2.1 功能介绍

路由管理用于配置路由转发，根据配置交换机，决定了消息路由规则，绑定队列，将服务请求消息正确地传达到服务提供端。

### 2.4.2.2 界面说明

单击【消息队列】→【路由管理】，进入路由管理页面。界面如下：

![](/assets/5-/4/image115.png)

图2.4‑9 路由管理

### 2.4.2.3 操作流程

**创建Exchange**

单击〖创建Exchange〗按钮，弹出Exchange创建窗口，编辑Exchange的基本信息（*为必输项），包括名称、类型，单击〖确定〗，生成一条Exchange（交换机）。

**Exchange类型**：

**Direct Exchange** –处理路由键。需要将一个队列绑定到交换机上，要求该消息与一个特定的路由键完全匹配。

**Fanout Exchange** – 不处理路由键。只需要简单的将队列绑定到交换机上。一个发送到交换机的消息都会被转发到与该交换机绑定的所有队列上。Fanout交换机转发消息是最快的。

**Topic Exchange** – 将路由键和某模式进行匹配。此时队列需要绑定要一个模式上。符号“#”匹配一个或多个词，符号“*”匹配不多不少一个词。

![](/assets/5-/4/image116.png)

图2.4‑10 创建Exchange

**刷新**

单击〖刷新〗按钮，更新当前状态的列表。

**编辑**

选择一条Exchange，单击〖编辑〗按钮，进入Exchange编辑窗口。

**Exchange信息**

Exchange信息页签，只能查看，不可编辑。

![](/assets/5-/4/image117.png)

图2.4‑11 Exchange信息

**绑定**

绑定页签，根据Exchange类型，绑定路由键值。

选择队列，输入路由键值，单击〖绑定〗按钮，绑定Exchange和队列。

单击〖解绑〗按钮，解除绑定。

![](/assets/5-/4/image118.png)

图2.4‑12 绑定

**发送消息**

发送消息页签，选择已绑定路由键值，编辑消息内容，单击〖发送消息〗按钮，发送消息。

![](/assets/5-/4/image119.png)

图2.4‑13 发送消息

**删除**

选择一个Exchange，单击〖删除〗按钮，可将其删除。系统默认生成的不可删除。

![](/assets/5-/4/image120.png)

图2.4‑14 删除Exchange

## 2.4.3 连接信息

### 2.4.3.1 功能介绍

连接信息即AMQP的配置信息，结合IDE使用，将写入IDE的消息中间件。

### 2.4.3.2 界面说明

单击【消息队列】→【连接信息】，进入连接信息页面。

![](/assets/5-/4/image121.png)

 
图2.4-15连接信息

### 2.4.3.3 操作流程

点击〖修改〗按钮，用户可修改密码。点击〖确定〗完成修改。

![](/assets/5-/4/image122.png)

 
图2.4-16修改密码







﻿