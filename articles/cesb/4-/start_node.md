# 开始端点

## RestApi

l 简介

针对网络应用的设计和开发方式，可以降低开发的复杂性，提高系统的可伸缩性。

l 配置

Ø 在流程配置界面右侧，拖动一个RestApi节点到画布上，同时需要选择这个节点绑定的api文件

![](/assets/7/image64.png)

配置rest相关的信息；选中节点，点击下方的属性编辑页签

Ø 类上信息配置

![](/assets/7/image65.png)

路径：类上面的路径配置，例如：/restService

Ø 方法配置

![](/assets/7/image66.png)

选中api中方法，配置方法上的信息；

路径：配置方法上的路径，例如：/rest

请求方法：get/post/put/delete,对应rest的四种请求方式。

Ø 参数配置

![](/assets/7/image67.png)

选中参数配置参数上面的信息：

数据来源：

![](/assets/7/image68.png)

为空：这个参数的取值来自请求体（适用于post、put请求）。

PathParam:这个参数的取值来自url路径；

QueryParam:这个参数的取值来自查询参数；

FormParam:这个参数的取值来自form表单；

HeaderParam:这个参数的取值来自请求头；

CookieParam：这个参数的取值来自Cookie;

请求类型配置：

![](/assets/7/image69.png)

Text:对用于简单的对象（例如：String）

JSON/XML:对应于传输一个复杂的对象（例如：自定义的一个对象），是以XML格式传送还是JSON格式

Ø 响应配置

![](/assets/7/image70.png)

响应的数据类型：响应给服务调用端的数据类型，配置方式同参数上的数据请求类型。



l 使用方式

使用rest的客户端，根据配置的信息调用，例如 类上的路径是：/restService,方法上的路径是：/rest

参数上的数据来源选择的是Pathparam,请求路径就如下，再根据不同的请求类型，点击不同的按钮发送请求。

![](/assets/7/image71.png)

服务端接受到请求后，就会处理这个请求，处理完成请求后，再按照配置的响应数据类型，响应给调用方。

## 定时器

l 简介

作为流程中的第一个节点，定时执行流程。

l 配置

Ø 使用简单表达式配置定时器，拖动定时器节点到流程编辑器中，

![](/assets/7/image72.png)

Ø 选中节点后，属性页签显示出该节点的配置信息，触发器的默认属性值为SimpleTrigger，即为简单表达式，如下图：


![](/assets/7/image73.png)


重试次数：即流程的运行次数，必填；

重试间隔：如图，即每隔10秒运行流程，必填；

开始/结束时间：流程的开始运行时间和结束时间，若为空则流程部署后运行，选填；

定时器相关参数：是运行流程的线程所在的线程池的配置，如线程池大小、容量等。

Ø 使用复杂表达式配置定时器

单击触发器后面的下拉按钮，选择CroExpressionTrigger如下图


![](/assets/7/image74.png)


单击触发器—表达式后面的放大镜按钮，弹出复杂表达式编辑器，可以在此对话框中配置时、分、秒、年、月、日的配置，其中“天”和“周”只能配置一个，如下图：

![](/assets/7/image75.png)

定时器相关参数和简单表达式中的一样，不再重述。



l 使用方式

部署流程后自动执行。



## WebService

l 简介

WebService发布节点，发布WebService供外界调用。

l 配置

Ø 在流程配置界面右侧，拖动一个WebService节点到画布上，同时需要选择这个节点绑定的api文件



![](/assets/7/image76.png)



配置WebService相关的信息；选中节点，点击下方的属性编辑页签

Ø 通用信息配置

![](/assets/7/image77.png)

服务文件路径：选择的api文件的路径，不可修改

发布地址：如/serv，其中端口号是在首选项的http选项中设置的；

传输协议及相关属性：只有http协议可选，相关属性可配置“mode”等。

快速模式：Server端响应WebService请求的模式，快速模式和转发模式为互斥选项。

转发模式和转发地址:为true时直接按转发地址转发，不执行流程。

是否受控：为true时ipass端进行流量等的监控。

Ø 安全信息配置

![](/assets/7/image78.png)

接入消息安全配置：单击接入消息安全配置后面的放大镜，弹出安全配置的对话框，在对话框中可以设置用户令牌、加密、签名、时间戳、回调类等多种的组合。

![](/assets/7/image79.png)

返回消息安全配置：同接入消息安全配置。

IP白名单：IP过滤表，只有在名单里的IP才可以调用该WebService, 配置对话框如下：

![](/assets/7/image80.png)

l 使用方式

部署后使用WebService的客户端进行调用，如soapUI等工具。



## AMQP

l 简介

使用AMQP消息服务器，接收消息。

l 配置

Ø 在右侧面板拖动一个AMQP节点到中间画布，同时选择AMQP节点需要绑定的api接口文件。

![](/assets/7/image81.png)

Ø AMQP基本配置

![](/assets/7/image82.png)

交互模式：one-way：只接收消息，处理完成后不响应消息。

request-response：请求响应模式，接收消息并处理完成后，须向发送消息目的地发送响应消息。

连接配置：选择一个ampq连接数据源。

交换器类型：选择Amqp交换器类型。Direct:点对点交换器，fanout:广播交换器，topic：订阅交换器

交换器名称：交换器的名称

发送消息目的地：发送消息的ampq队列名称

接收消息目的地：接受消息的ampq队列名称

超时：仅适用于请求响应模式：接收消息时的最长等待时间。

Ø api设置

![](/assets/7/image83.png)

参数配置：

 数据来源：参数值取至于消息头还是消息体，（消息头参数只能配置基本类型）

 请求数据类型：text/json/xml同Restapi的请求数据类型配置。Object:对象类型,能接受一个Java对象(这个对象需要实现java.io.Serializable接口)

响应类型配置：

![](/assets/7/image84.png)

响应数据类型配置：同请求数据类型配置。

l 使用方式

向监听的amqp消息队列中发送一条相同消息类型的消息并按照绑定的api请求参数，接收端会监听消息队列，当消息到达后，会自动进行处理，处理完成后，根据交换模式的配置，是否响应数据给调用端。

## JMS

l 简介

l 配置

Ø 在右侧面板拖动一个jms节点到中间画布，同时选择jms节点需要绑定的api接口文件。

![](/assets/7/image85.png)

Ø jms基本配置

![](/assets/7/image86.png)

交互模式：one-way：对于服务调用端：只向mq消息队列中发送消息，不接受消息；对于服务接受端：只接受消息，处理完成后不响应消息。

request-response：请求响应模式，对于服务调用端：向mq消息队列中发送消息，并且从另一个消息队列中接受响应消息；对于服务接受端，接受到消息，处理完成后，并向另一个消息队列发送一条响应消息。

queue/topic：队列消息还是主题消息，队列消息只能有一个消费者能接受到消息。主题消息所用的消费者都能接受到消息。

连接配置：选择一个mq连接数据源

消息类型：发送的mq消息的类型，支持auto（自动判断消息类型）、TextMessage(文本消息)、BytesMessage(字节数组消息)、ObjectMessage(对象消息)、MapMessage(映射表消息)

接收消息目的地：仅适用于请求响应模式，接受响应消息的mq队列名称

超时：仅适用于请求响应模式：接收消息时的最长等待时间。

Ø api设置

![](/assets/7/image87.png)

参数配置：

 数据来源：参数值取至于消息头还是消息体，（消息头参数只能配置基本类型）

 请求数据类型：text/json/xml同Restapi的请求数据类型配置。Object:对象类型,能接受一个Java对象(这个对象需要实现java.io.Serializable接口)

响应类型配置：

![](/assets/7/image88.png)

响应数据类型配置：同请求数据类型配置。

l 使用方式

向监听的jms消息队列中发送一条相同消息类型的消息并按照绑定的api请求参数，接收端会监听消息队列，当消息到达后，会自动进行处理，处理完成后，根据交换模式的配置，是否响应数据给调用端。
