# 事件和定时器的配置

## 事件的配置

![](/assets/7/image166.png)

事件的配置包含定义事件和为事件添加监听器。

在左侧点击增加事件，将弹出事件定义对话框，事件只有一个属性就是事件的名称。

在左侧选中一个事件后，可以在右侧为这个事件增加监听器。监听器是实现org.jbpm.api.listener.EventListener的类。点击新建按钮，将会弹出创建监听器类的向导，可以新建一个监听器并加直接加入列表中。当点击增加按钮，将会弹出选择监听器类的过滤器，可以从中选择一个监听器类加入列表中。

## 定时器的配置

定时器列表页面：

![](/assets/7/image167.png)

![](/assets/7/image168.png)


定时器配置对话框

对于等待类型的结点，可以配置定时器，当流程进入到等待结点的时候，定时器开始启动，当定时器到期时，会发布相应的事件或使流程沿着指定的流程执行。当流程离开等待结点后，定时器将会被销毁，销毁的定时器不会有任何动作。

定时器的配置包括如下属性

1. 过期时间：当流程进入等待结点多长时间后，定时器到期

2. 重复次数：定时器将会被重复触发多少次

3. 重复间隔：定时器第一次触发后，每间隔多长时间重复触发一次

4. 失败重试次数：如果一次触发执行失败了，会重试多少次

5. 事件名称：当定时器被触发时将发布什么事件。事件是从上一节配置的事件中选出来的。

6. 信号名称：当定时器被触发时将使流程沿着哪条路径执行。信号名称是从该结点的输出路径中选出的。

7. 是否独占：当定时器被触发之后的执行的动作是否是独占的。

8. 注意：

 i. 首先：ESB服务器设置-流程配置-启用异步任务扫描：

![](/assets/7/image169.png)

 ii. 结点的输出路径有同步和异步之分，如果信号名称选择的是同步的路径，则流程会离开该结点，继续主流程的执行，该结点的定时器将会被销毁；如果选择的是异步路径，则流程会执行该路径，并且主流程会留在原结点，该结点的定时器不会被销毁。
